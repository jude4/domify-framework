<?php
namespace Framework\Cache;
class FileCache { private string $path; public function __construct(string $path){ $this->path=$path; if(!is_dir($path)) mkdir($path,0775,true);} private function file(string $key): string{ return $this->path . '/cache_' . md5($key) . '.json'; } public function put(string $key,$value,int $seconds=0): void{ $data=['value'=>$value,'expires_at'=>$seconds>0?time()+$seconds:null]; file_put_contents($this->file($key),json_encode($data)); } public function get(string $key,$default=null){ $file=$this->file($key); if(!file_exists($file)) return $default; $data=json_decode(file_get_contents($file), true); if($data['expires_at'] && time()>$data['expires_at']){ unlink($file); return $default;} return $data['value']; } public function forget(string $key): void{ $file=$this->file($key); if(file_exists($file)) unlink($file);} }
